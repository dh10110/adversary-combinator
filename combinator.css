@import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap');

:root {
    --bg: light-dark(#ffffff, #1a1a1a);
    --fg: light-dark(#333333, #f0f0f0);
    --theme-color: #8A00C4;
    --header-bg: light-dark(#8A00C4, #eeeeee);
    --header-fg: light-dark(#fafafa, #333333);
    --leader-color: var(--theme-color);
    --follower-color: oklch(from var(--theme-color) l c 120);
    --loss-color: oklch(from var(--theme-color) l c 30);
}

h1, h2, h3 {
    font-family: 'Josefin Sans', sans-serif;
    margin: 0.2em 0 0;
}

body {
    margin: 0;
    padding: 0;
    font-family: "Noto Sans", sans-serif;
    font-optical-sizing: auto;
    background-color: var(--bg);
    color: var(--fg);
    min-block-size: 100vb;
    display: grid;
    grid-template-rows: auto 1fr auto;
    
    > header {
        padding: 0.75em;
        padding-bottom: 0.5em;
        background-color: var(--header-bg);
        color: var(--header-fg);
        background-image: linear-gradient(to right, var(--leader-color), var(--follower-color));

        h1 {
            margin: 0;
            font-size: 125%;
        }
    }

    > main{
        padding: 1ch;
    }

    > footer {
        font-size: small;
        padding: 0.25em;
        margin-top: 1ch;
        padding-top: 1ch;
        text-align: right;

        > p {
            margin: 0;
        }
    }
}

button, input { font-family: inherit; font-size: inherit; }

button { cursor: pointer; }
[type="range"] { cursor: pointer; }


.adversary-selection {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    /* grid-template-rows: 30% 2em 30%; */

    column-gap: 0.5ch;
    max-width: 65ch;
    margin-inline: auto;
    
    > button {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.25em;
    }


    > article {
        display: grid;
        grid-template-rows: auto 1fr auto;

        &#leader-selection {
            --local-color: var(--leader-color);
        }
        &#follower-selection {
            --local-color: var(--follower-color);
            > h2 {
                text-align: right;
            }
        }
        &[data-adv="NONE"] > label {
            visibility: hidden;
        }     

        > h2 {
            margin: 0.1em;
            font-size: 100%;
        }
        > button {
            aspect-ratio: 3/2;
        }
        > label {
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            font-size: smaller;
        }
        [type="range"] {
            accent-color: var(--local-color);
        }
    }

}

.adversary-selection > dialog {
    --local-color: #888;
    border-color: var(--local-color);
    padding: 0;

    > header {
        background-color: var(--local-color);
        color: var(--header-fg);
        margin: auto;
        > h2 {
            margin: 0;
            font-size: normal;
        }
    }
    ul {
        --cols: 2;

        margin: 0;
        padding: 1ch;
        list-style: none;

        display: grid;
        grid-template-columns: repeat(var(--cols), 1fr);
        flex-wrap: wrap;
        gap: 0.5ch;
        margin-inline: auto;

        @media (width > 450px) {
            --cols: 3;
        }

        > li {
            /*min-width: 15ch;*/
            /*width: 32%;*/
            aspect-ratio: 3/2;
            display: grid;

            &:has([data-sel]) {
                grid-row: 1;
            }
        }
    }
    button {
        --sel-color: silver;

        &[data-sel=leader] {
            --sel-color: var(--leader-color);
        }
        &[data-sel=follow] {
            --sel-color: var(--follower-color);
        }

        &[data-sel] {
            border-color: var(--sel-color);
            outline: 1px solid var(--sel-color);
        }

        & [data-mode] {
            display: none;
        }
        &[data-sel=leader] [data-mode=leader],
        &[data-sel=follow] [data-mode=follow] {
            display: block;
            color: var(--sel-color);
        }   
    }

    
    &[data-mode=leader] {
        --local-color: var(--leader-color);
    }
    &[data-mode=follow] {
        --local-color: var(--follower-color);
    }

    &::backdrop {
        background-color: rgb(from var(--local-color) r g b / 0.3);
    }

}


.icon {
    max-width: 1em;
    max-height: 1em;
}
.inline-range {
    background-image: url(./img/icon/RangeArrow.svg);
    width: 2.4rem;
    display: inline-block;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: bottom;
    text-align: center;
    font-size: large;
    font-weight: bold;
}

.keep-together {
    /* display: inline-block; */
    white-space: nowrap;
}

.flag-button {
    display: grid;
    grid-template-areas: 'a';
    align-items: center;
    padding: 0.5ch;

    --flag-bg: url(./img/flag-svg/none.svg);

    background-image: radial-gradient(rgb(from white r g b / 50%) 0%, rgb(from white r g b / 20%) 100%),
        var(--flag-bg);
    background-position: center;
    background-size: cover;
    background-repeat: no-repeat;

    text-shadow: white 0 0 1px, white 0 0 3px, white 0 0 6px;

    border: 1px solid silver;
    border-radius: 3px;

    &:hover {
        filter: brightness(0.97);
    }


    & > * {
        grid-area: a;
        z-index: 1;
    }

    & > [data-mode="leader"] {
        align-self: end;
        justify-self: start;
    }

    & > [data-mode="follow"] {
        align-self: end;
        justify-self: end;
    }

    & .flag-text {
        justify-self: center;
        padding: 1ch;
        background-color: hsl(0 0 100 / 0.8);
        border: 1px solid hsl(0 0 0 / 0.8);
        border-color: rgb(from var(--local-color) r g b / 0.8);
        border-radius: 1ch;
        corner-shape: scoop;

        i {
            display: inline-block;
        }
    }
    
}

.altag {
    display: inline-flex;
    gap: 2px;
    border: 1px solid silver;
    padding-right: 2px;
    border-radius: 0 3px 3px 0;
    height: 1.1em;

    .altag_flag {
        display: inline-block;
        /* height: 1em; */
        aspect-ratio: 3 / 2;
        background-image: var(--flag-bg);
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        /* border: 1px solid silver; */
        border-right: 1px solid silver;
    }

    .altag_level {
        font-size: 90%;
        align-self: center;
    }
}

.effect-detail {
    &.effect-type-loss {
        border-left: 5px solid var(--loss-color);
        padding-left: 3px;
    }
    &.effect-type-esc {
        border-left: 5px solid var(--leader-color);
        padding-left: 3px;
    }
    &.effect-type-mult {
        border-left: 5px solid oklch(from var(--theme-color) l 0 0);
        padding-left: 3px;
    }
}
.effect-name {
    font-weight: bold;
    font-size: small;
}
.effect-xtext {
    font-style: italic;
    font-size: 95%;
}

.effect-list {
    margin-block: 2em;

    > [data-container] {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 0.5ch;
        
        > article {
            display: grid;
            grid-column: 1 / -1;
            grid-template-columns: subgrid;
        }
    }

    > ul {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 0.5ch;
        margin: 0;
        padding: 0;
        list-style-type: none;
        > li {
            display: grid;
            grid-column: span 2;
            grid-template-columns: subgrid;
            > article {
                display: grid;
                grid-column: span 2;
                grid-template-columns: subgrid;
            }
        }
    }
    & .effect-header {
        grid-column: 1 / -1;
    }
}
.fear-deck {
    display: flex;
    gap: 1ch;
    height: 1.3em;
    align-items: center;

    .tl { height: 100%; }
}
